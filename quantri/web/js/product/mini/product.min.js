function clicktabversion(a,e){$(this).hasClass("active")?($("#"+a).show(),$("#"+e).hide()):($("#"+e).hide(),$("#"+a).show())}function editVersionPro(a){$("#idVersion").val(a),$("#versionAction").val("update"),$("#UpdateVersionPro").text("Chỉnh sửa"),$.ajax({url:"/quantri/products/product-versions/info-update",type:"get",dataType:"JSON",data:{id:a},success:function(a){a?($("#productVersionDate").val(a.date),$("#productVersionName").val(a.name),$("#productVersion_price_1-disp").val(a.price_1),$("#productVersion_price_1").val(a.price_1),$("#productVersion_price_sale_1-disp").val(a.price_sale_1),$("#productVersion_price_sale_1").val(a.price_sale_1),$("#productVersion_price_2-disp").val(a.price_2),$("#productVersion_price_2").val(a.price_2),$("#productVersion_price_3-disp").val(a.price_3),$("#productVersion_price_3").val(a.price_3),$("#proversionstatus").val(a.status),$("#modalProductVersion").modal()):$.notify({icon:"pe-7s-gift",message:"Phiên bản này ko có !"},{type:"info",timer:500})}})}function deleteVersionPro(a){confirm("Bạn có chắc muốn xóa phiên bản sản phẩm ?")&&$.ajax({url:"/quantri/products/product-versions/delete-version",type:"get",dataType:"JSON",data:{id:a},success:function(e){e.successful===!0?($("#row_versions_"+a).remove(),message=e.message):message="Xóa thất bại !",$.notify({icon:"pe-7s-gift",message:message},{type:"info",timer:500})}})}function editImagePro(a){$("#UpdateImagePro").attr("data-id",a),$("#UpdateImagePro").attr("data-action","update"),$("#UpdateImagePro").text("Chỉnh sửa"),$("#imageAction").val("update"),$("#imageId").val(a),$.ajax({url:"/quantri/products/anhsanpham/update-new-image",type:"get",dataType:"JSON",data:{id:a},success:function(a){$("#imageFile").val(a.image),$("#previewImage").attr("src",a.image),$("#imagetitle").val(a.title),$("#imagealt").val(a.alt),$("#imageorder").val(a.order),$("#modalAddImages").modal()}})}function deleteImagePro(a){confirm("Bạn có chắc muốn xóa ảnh sản phẩm ?")&&$.ajax({url:"/quantri/products/anhsanpham/remove-image",type:"get",dataType:"JSON",data:{id:a},success:function(e){e.successful===!0?($("#row_image_"+a).remove(),$("#imageFile").val(e.image),$("#previewImage").attr("src",e.image),$("#imagetitle").val(e.title),$("#imagealt").val(e.alt),$("#imageorder").val(e.order),$("#UpdateImagePro").hide(),$("#modalAddImages").modal(),setTimeout(function(){$("#modalAddImages").modal("hide")},1500)):$.notify({icon:"pe-7s-gift",message:"Xóa thất bại !"},{type:"info",timer:500})}})}var Global={showShortDescription:function(){$(".add_short_description").click(function(a){$(this).hide(),$("#product_short_introduction").show()}),$("#show_product_time_status").click(function(a){$(this).hide(),$("#product_time_status").show(),a.preventDefault()}),$("#product_time_status .icon-list-demo").click(function(a){var e=$("#product_time_status");e.hide(),e.prev("#show_product_time_status").show(),a.preventDefault()})},addProductImages:function(){return $("#UpdateImagePro").click(function(a){let e=$("#imageAction").val(),t=$(this).data("proid"),i=$("#imageId").val(),r=$("#imageFile"),o=$("#imagetitle"),n=$("#imagealt"),l=$("#imageorder");if(""!=r.val()){let a={action:e,idIma:i,pro_id:t,image:r.val(),title:o.val(),alt:n.val(),order:l.val(),count_row_image:$(".row_image").length};$.ajax({url:$(this).data("url"),data:a,success:function(a){if("update"==e)var t="Bạn đã sửa thành công !";if("create"==e)var t="Bạn đã thêm ảnh thành công !";$("#body_images_list").html(a),$("#modalAddImages").modal("hide"),$.notify({icon:"pe-7s-gift",message:t},{type:"info",timer:5})}})}else alert("Bạn chưa nhập ảnh")}),!1},addProductVersion:function(){return $("#UpdateVersionPro").click(function(a){var e=$("#idVersion").val(),t=$("#versionAction").val(),i=$("#versionProduct_id").val(),r=$(this).data("id"),o=$("#productVersionName"),n=$("#productVersionDate"),l=$("#productVersion_price_1"),c=$("#productVersion_price_sale_1"),s=$("#productVersion_price_2"),d=$("#productVersion_price_3"),p=$("#proversionstatus");if(name_val=o.val(),price_1_val=l.val(),price_sale_1_val=parseInt(c.val()),price_2_val=parseInt(s.val()),price_3_val=parseInt(d.val()),isNaN(price_sale_1_val)&&(price_sale_1_val=0),isNaN(price_2_val)&&(price_2_val=0),isNaN(price_3_val)&&(price_3_val=0),""==name_val||void 0===name_val||null===name_val)alert("Bạn chưa nhập tên ");else if(parseInt(price_1_val)<0||""==price_1_val||void 0===price_1_val||null===price_1_val)alert("Bạn chưa nhập giá gốc");else if(parseInt(price_1_val)<=price_sale_1_val)alert("giá gốc <= 0, hoặc giá gốc <= giá bán");else{"NaN"==price_sale_1_val&&(price_sale_1_val=null);var u={id:e,product:i,action:t,date:n.val(),pro_id:r,name:name_val,price_1:price_1_val,price_sale_1:price_sale_1_val,price_2:price_2_val,price_3:price_3_val,status:p.val(),count_row_versions:$(".row_versions").length};$.ajax({url:$(this).data("url"),data:u,success:function(a){$("#body_versions_list").html(a),$("#modalProductVersion").modal("hide")}})}}),!1},EditProImage:function(){EditProImage=$(".EditProImage"),EditProImage.each(function(a,e){$(this).on("click",function(a){$.ajax({url:"/quantri/products/anhsanpham/update-new-image",type:"get",dataType:"JSON",data:{id:$(this).data("id")},success:function(a){$("#imageId").val(a.id),$("#imageAction").val("update"),$("#UpdateImagePro").attr("data-id",a.id),$("#UpdateImagePro").attr("data-action","update"),$("#UpdateImagePro").text("Chỉnh sửa"),$("#imageFile").val(a.image),$("#previewImage").attr("src",a.image),$("#imagetitle").val(a.title),$("#imagealt").val(a.alt),$("#imageorder").val(a.order),$("#modalAddImages").modal()}})})})},checkTenThuoctinh:function(){var a=$(".modelThuoctinhName");a.each(function(){$(this).on("change",function(a){$(this);return $.ajax({url:"/quantri/products/thuoctinhsp/checkname",type:"get",dataType:"JSON",data:{name:$(this).val()},success:function(a){}}),a.preventDefault(),!1})})}};$(document).ready(function(){Global.showShortDescription(),Global.addProductImages(),Global.addProductVersion();$("#add_new_attrubuteProduct").click(function(a){$("#modalAttribute").modal()}),$("#productNewImage").click(function(a){$("#UpdateImagePro").text("Thêm mới"),$("#UpdateImagePro").attr("data-action","create"),$("#imageId").val(null),$("#imageAction").val(null),$("#imageFile").val(null),$("#previewImage").attr("src",null),$("#imagetitle").val(null),$("#imagealt").val(null),$("#imageorder").val(null),a.preventDefault()}),$("#modalAddImages").on("hidden.bs.modal",function(a){$("#UpdateImagePro").attr({"data-id":"0","data-action":"create"}),a.preventDefault()}),$("#modalProductVersion").on("hidden.bs.modal",function(a){$("#idVersion").val(null),$("#versionAction").val(null),$("#productVersionName").val(null),$("#productVersionDate").val(null),$("#productVersion_price_1-disp").val(null),$("#productVersion_price_sale_1-disp").val(null),$("#productVersion_price_2-disp").val(null),$("#productVersion_price_3-disp").val(null),a.preventDefault()}),$("#productVersion").hide(),$("#adformsubmit").click(function(){var a=$("#products-price_sales").val(),e=$("#products-start_sale").val(),t=$("#products-end_sale").val();""!=a&&(""==e||""==t?(alert("Bạn nhập giá khuyến mại nhưng chưa chọn ngày"),$(this).attr("type","button")):$(this).attr("type","submit"))})});
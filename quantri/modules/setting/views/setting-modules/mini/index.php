<?php use yii\helpers\Html;use yii\grid\GridView;use yii\widgets\Pjax;use kartik\select2\Select2;$this->title='Danh sách Modules';$this->params['breadcrumbs'][]=$this->title;$page_show=Yii::$app->params['modules']['page_show'] ?><div class="setting-modules-index"><h1><?=Html::encode($this->title)?></h1><?php Pjax::begin(); ?><?php  ?><p class="btn_save"><?=Html::a('Thêm mới',['create'],['class'=>'btn btn-success'])?></p><div class="table-responsive"><?=GridView::widget(['dataProvider'=>$dataProvider,'filterModel'=>$searchModel,'tableOptions'=>['class'=>'table table-bordered table-hover'],'columns'=>[['class'=>'yii\grid\SerialColumn'],['attribute'=>'name','format'=>'html','content'=>function($model){return Html::a($model->name,['setting-modules/view','id'=>$model->id],['title'=>Yii::t('app','lead-view'),]);}],['attribute'=>'positions','contentOptions'=>['class'=>'text-center'],],'type_module',['attribute'=>'cate_id','content'=>function($data){switch($data->type_module){case 'product':{if($data->category){return($data->category)?$data->category->cateName:null;}else{return '';}break;}case 'news':return($data->dmuctin)?$data->dmuctin->cateName:null;break;default:return null;break;}}],['attribute'=>'hienthi','format'=>'raw','value'=>function($data){if($data->type_module=='news'){if($data->hienthi==''){return '';}else{return Yii::$app->params['hienthi']['news'][$data->hienthi];}}elseif($data->type_module=='product'){if($data->hienthi==''){return '';}else{return Yii::$app->params['hienthi']['products'][$data->hienthi];}}else{return $data->hienthi;}},],['attribute'=>'order','contentOptions'=>['class'=>'text-center','style'=>'width:6%'],'format'=>'html','content'=>function($model,$key,$index,$column){$html="<div class=\"updateProduct$key proUpdate\">".Html::textInput('order',$model->order,['max'=>998,'class'=>'form-control col-md-4','id'=>'order'.$key]).Html::button('Save',$options=['class'=>'btn btn-info btn-outline col-md-5 saveOrder',"data-url"=>Yii::$app->getUrlManager()->createUrl(['/setting/setting-modules/quickchange']),'data-id'=>$key]).Html::button('Cancel',$options=['class'=>'btn btn-default btn-outline col-md-6 Cancel','style'=>'margin:2px'])."</div>";return Html::button($model->order,$options=['data-field'=>'order','data-id'=>$key,'id'=>'buttonOrder'.$key,'class'=>'btn btn-block btn-outline btn-primary Quickchange change',]).$html;},],['attribute'=>'status','contentOptions'=>['class'=>'text-center','style'=>'width:5%'],'format'=>'html','content'=>function($model,$key,$index,$column){$classbtn=($model->status==0)?'btn-danger':'btn-success';return Html::button(($model->status==0)?' Ẩn ':'Hiện',$options=['data-field'=>'status','data-id'=>$key,'id'=>'status'.$key,"data-url"=>Yii::$app->getUrlManager()->createUrl(['/setting/setting-modules/statuschange']),"class"=>"btn btn-block btn-outline $classbtn Quickactive change",]);},],['attribute'=>'page_show','format'=>'raw','value'=>function($model)use($page_show){$hienthi=json_decode($model->page_show);if(is_array($hienthi)){foreach($hienthi as $key=>$value){$hienthi[$key]=isset($page_show[$value])?$page_show[$value]:$value;}$hienthi=implode("; ",$hienthi);return $hienthi;}else{return $model->page_show;}}],['class'=>'yii\grid\ActionColumn','header'=>'Actions','headerOptions'=>['style'=>'color:#337ab7;width: 8%','class'=>'text-center'],'contentOptions'=>['class'=>'actionColumn text-center','style'=>'font-size:18px'],'template'=>'{view}  {update}  {delete}','visibleButtons'=>['view'=>Yii::$app->user->can('setting/setting-modules/view'),'update'=>Yii::$app->user->can('setting/setting-modules/update'),'delete'=>Yii::$app->user->can('setting/setting-modules/delete')],],],])?></div><?php Pjax::end(); ?></div><?php $this->registerJsFile('@web/js/product/global.js',['depends'=>[\yii\web\JqueryAsset::class]]);$this->registerJsFile('@web/js/product/productcategory_index.js',['depends'=>[\yii\web\JqueryAsset::class]]); ?>